#!/usr/bin/env python3
"""–§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∑–∞–¥–∞–Ω–∏—è"""
from src.models import Product, Category

print("–§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –î–û–ú–ê–®–ù–ï–ì–û –ó–ê–î–ê–ù–ò–Ø")
print("=" * 60)

# –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 1: –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ quantity=0
print("\n1. –¢–†–ï–ë–û–í–ê–ù–ò–ï 1: –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ quantity=0")
print("-" * 40)

try:
    Product("–¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–≤–∞—Ä", "–û–ø–∏—Å–∞–Ω–∏–µ", 100.0, 0)
    print("‚ùå –û–®–ò–ë–ö–ê: –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –≤—ã–∑–≤–∞–Ω–æ!")
    exit(1)
except ValueError as e:
    if str(e) == "–¢–æ–≤–∞—Ä —Å –Ω—É–ª–µ–≤—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω":
        print(f"‚úÖ –í–´–ü–û–õ–ù–ï–ù–û: {e}")
    else:
        print(f"‚ùå –û–®–ò–ë–ö–ê: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: {e}")
        exit(1)
# –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 2: –ú–µ—Ç–æ–¥ calculate_average_price
print("\n2. –¢–†–ï–ë–û–í–ê–ù–ò–ï 2: –ú–µ—Ç–æ–¥ calculate_average_price")
print("-" * 40)

# 2.1: –ü—É—Å—Ç–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
category = Category("–ü—É—Å—Ç–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è", "–ù–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤")
if not hasattr(category, 'calculate_average_price'):
    print("‚ùå –û–®–ò–ë–ö–ê: –ú–µ—Ç–æ–¥ calculate_average_price –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!")
    exit(1)

result = category.calculate_average_price()
if result == 0:
    print(f"‚úÖ –ü—É—Å—Ç–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0: {result}")
else:
    print(f"‚ùå –û–®–ò–ë–ö–ê: –ü—É—Å—Ç–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç {result}, –æ–∂–∏–¥–∞–ª–æ—Å—å 0")
    exit(1)
# 2.2: –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å —Ç–æ–≤–∞—Ä–∞–º–∏
products = [
    Product("–¢–æ–≤–∞—Ä 1", "–û–ø–∏—Å–∞–Ω–∏–µ 1", 100.0, 5),
    Product("–¢–æ–≤–∞—Ä 2", "–û–ø–∏—Å–∞–Ω–∏–µ 2", 200.0, 3),
    Product("–¢–æ–≤–∞—Ä 3", "–û–ø–∏—Å–∞–Ω–∏–µ 3", 300.0, 2)
]
category2 = Category("–ö–∞—Ç–µ–≥–æ—Ä–∏—è", "–° —Ç–æ–≤–∞—Ä–∞–º–∏", products)
result2 = category2.calculate_average_price()
expected = (100 + 200 + 300) / 3

if abs(result2 - expected) < 0.001:
    print(f"‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å —Ç–æ–≤–∞—Ä–∞–º–∏: {result2} (–æ–∂–∏–¥–∞–ª–æ—Å—å: {expected})")
else:
    print(f"‚ùå –û–®–ò–ë–ö–ê: –ü–æ–ª—É—á–µ–Ω–æ {result2}, –æ–∂–∏–¥–∞–ª–æ—Å—å {expected}")
    exit(1)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–æ–¥–∞ __len__
print("\n3. –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û: –ú–µ—Ç–æ–¥ __len__")
print("-" * 40)

if len(category) == 0:
    print(f"‚úÖ –ü—É—Å—Ç–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è: len={len(category)}")
else:
    print(f"‚ùå –û–®–ò–ë–ö–ê: –ü—É—Å—Ç–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è len={len(category)}, –æ–∂–∏–¥–∞–ª–æ—Å—å 0")
    exit(1)

if len(category2) == 10:  # 5 + 3 + 2
    print(f"‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å —Ç–æ–≤–∞—Ä–∞–º–∏: len={len(category2)}")
else:
    print(f"‚ùå –û–®–ò–ë–ö–ê: –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å —Ç–æ–≤–∞—Ä–∞–º–∏ len={len(category2)}, –æ–∂–∏–¥–∞–ª–æ—Å—å 10")
    exit(1)

print("\n" + "=" * 60)
print("üéâ –í–°–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´ –£–°–ü–ï–®–ù–û!")
print("=" * 60)
